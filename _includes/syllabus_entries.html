{% assign lecture_counter = 0 %} <!-- For counting weeks -->
{% assign lecture_counter_disp = 0 %} <!-- For showing in table (ignores midterms) -->

{% for lecture in site.data.lectures %}

  <!-- Use this block if starting lecture date is week begin -->
  {% assign is_week_begin = lecture_counter | modulo: 2 %}
  {% assign week = lecture_counter | plus: 1 | divided_by: 2.0 | ceil %}
  {% assign is_off_week = false %}

  <!-- Use this block if starting lecture data is not week begin -->
  {% comment %}
  {% assign is_week_begin = lecture_counter | modulo: 2 %}
  {% assign week = lecture_counter | plus: 1 | divided_by: 2.0 | ceil %}
  {% assign is_off_week = true %}
  {% endcomment %}

<!-- Having line below here 1-indexes the lectures without changing week structure -->
  {% assign lecture_counter = lecture_counter | plus: 1 %}
  {% assign lecture_counter_disp = lecture_counter_disp | plus: 1 %}

  <tr class="lecture"
      data-lecture-week="{{ week }}"
      data-lecture-date="{{ lecture.date }}">

    <!-- Week Column  -->
    {% if is_week_begin == 0 %}
      <td class="lecture__week" id="lecture-week-{{week}}" rowspan="2">
        {{ week }}
      </td>
    {% elsif lecture_counter == 1 and is_off_week %}
      <td class="lecture__week" id="lecture-week-{{week}}">
        {{ week }}
      </td>
    {% endif %}

    <!-- Lecture Column -->
    <!-- Check if it's a midterm -->
    {% if lecture.topic contains "Midterm" %}
    <!-- Don't count midterm as a lecture; decrement displayed number (incremented in each loop) -->
    	{% assign lecture_counter_disp = lecture_counter_disp | minus: 1 %}
    {% else %}
	    <th class="lecture__num">
	      {{ lecture_counter_disp }}
	    </th>
    {% endif %}

    <!-- Data Column -->
    <td class="lecture__date">
      {{ lecture.date }}
    </td>

    <!-- Topic Column -->
    <td class="lecture__info">
      <h3>
        {{ lecture.topic }}
        <!-- {% if lecture.lecturer %} [{{ lecture.lecturer }}] {% endif %} -->
      </h3>

      <!-- the second class field for description is used to un-hidden the field -->
      <p class="lecture__description description-week-{{week}}" hidden="true">
          {{ lecture.description }}
      </p>
      
      {% if lecture.resources %}
      <p class="lecture__resources">
        {{ lecture.resources | markdownify }}
      </p>
      {% endif %}
      <!-- {% if lecture.textbook %}
      <p class="lecture__textbook"><strong>
        Textbook:
        {% for entry in lecture.textbook %}
          <a href="{{ entry.url }}">{{ entry.chapter }}</a>
          {% if entry != lecture.textbook.last %}
            ,
          {% endif %}
        {% endfor %}
      </strong></p>
      {% endif %}

      {% if lecture.links %}
      <p>
        [
        {% for link in lecture.links %}
          <a href="{{ link.url }}">{{ link.name }}</a>
          {% if link != lecture.links.last %}
            |
          {% endif %}
        {% endfor %}
        ]
      </p>
      {% endif %}

      {% if lecture.assignment %}
        <h4 class="lecture__assignment">
          {{ lecture.assignment | markdownify }}
        </h4>
      {% endif %} -->
    </td>

    <!-- Slides Column -->
    {% if lecture.slides %}
      <td class="lecture__slides">
          <a href="{{ lecture.slides }}">Slides</a>
      </td>
    {% endif %}

    <!-- Video Column -->
    {% if lecture.video %}
      <td class="lecture__video">
          <a href="{{ lecture.video }}">Video</a>
      </td>
    {% endif %}

    <!-- Lab Column -->
    {% if lecture.lab %}
      <td class="lab__info">
          {{ lecture.lab | markdownify }}
      </td>
    {% else %}
      <td class="lab__info"> </td>
    {% endif %}

    <!-- Discussion Column -->
    {% if lecture.discussion %}
      <td class="disc__info">
          {{ lecture.discussion | markdownify }}
      </td>
    {% else %}
      <td class="disc__info"> </td>
    {% endif %}

    <!-- Homework Column -->
    {% if lecture.homework %}
      <td class="hw__info">
          {{ lecture.homework | markdownify }}
      </td>
    {% else %}
      <td class="hw__info"> </td>
    {% endif %}



  </tr>
{% endfor %}
